According to this blog(https://www.radixdlt.com/post/rekt-retweet-11-re-entrancy-why-the-11m-agave-and-hundred-finance-hacks-could-never-happen-on-radix),

One way to fix the issue is by migrating the Agave app to a different language, where no reentrent is required for cross-contract calls. 

Another way is by adding a reentrancy guard in Ctoken function 