The fix is in each individual liquidity pool apps, such as adding a lock to ensure
consistent state transitions 